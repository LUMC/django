(function(b){b.fn.formset=function(f){var a=b.extend({},b.fn.formset.defaults,f),k=function(a,c,g){var e=RegExp("("+c+"-(\\d+|__prefix__))"),c=c+"-"+g;b(a).attr("for")&&b(a).attr("for",b(a).attr("for").replace(e,c));a.id&&(a.id=a.id.replace(e,c));a.name&&(a.name=a.name.replace(e,c))},f=b("#id_"+a.prefix+"-TOTAL_FORMS").attr("autocomplete","off"),i=parseInt(f.val()),h=b("#id_"+a.prefix+"-MAX_NUM_FORMS").attr("autocomplete","off"),f=""==h.val()||0<h.val()-f.val();b(this).each(function(){b(this).not("."+
a.emptyCssClass).addClass(a.formCssClass)});if(b(this).length&&f){var j;"TR"==b(this).attr("tagName")?(f=this.eq(0).children().length,b(this).parent().append('<tr class="'+a.addCssClass+'"><td colspan="'+f+'"><a href="javascript:void(0)">'+a.addText+"</a></tr>"),j=b(this).parent().find("tr:last a")):(b(this).filter(":last").after('<div class="'+a.addCssClass+'"><a href="javascript:void(0)">'+a.addText+"</a></div>"),j=b(this).filter(":last").next().find("a"));j.click(function(){var d=b("#id_"+a.prefix+
"-TOTAL_FORMS"),c=b("#"+a.prefix+"-empty"),g=c.clone(true);g.removeClass(a.emptyCssClass).addClass(a.formCssClass).attr("id",a.prefix+"-"+i);g.find("*").each(function(){k(this,a.prefix,d.val())});g.insertBefore(b(c));b(d).val(parseInt(d.val())+1);i=i+1;h.val()!=""&&h.val()-d.val()<=0&&j.parent().hide();a.added&&a.added(g);return false})}b(this).each(function(){if(b(this).hasClass("form-row")&&!b(this).hasClass("has_original")){var d=b(this);d.is("tr")?d.children(":last").append('<div class="inline-delete"><a class="'+
a.deleteCssClass+'" href="javascript:void(0)">'+a.deleteText+"</a></div>"):d.is("ul")||d.is("ol")?d.append('<li class="inline-delete"><a class="'+a.deleteCssClass+'" href="javascript:void(0)">'+a.deleteText+"</a></li>"):d.children(":first").append('<span class="inline-delete"><a class="'+a.deleteCssClass+'" href="javascript:void(0)">'+a.deleteText+"</a></span>");d.find("a."+a.deleteCssClass).click(function(){var c=b(this).parents("."+a.formCssClass),d=c.prev("tr");c.remove();i-=1;d.hasClass("form-row")||
d.remove();a.removed&&a.removed(c);c=b("."+a.formCssClass);b("#id_"+a.prefix+"-TOTAL_FORMS").val(c.length);(""==h.val()||0<h.val()-c.length)&&j.parent().show();for(var e=0,d=c.length;e<d;e++)k(b(c).get(e),a.prefix,e),b(c.get(e)).find("*").each(function(){k(this,a.prefix,e)});return!1})}});return this};b.fn.formset.defaults={prefix:"form",addText:"add another",deleteText:"remove",addCssClass:"add-row",deleteCssClass:"delete-row",emptyCssClass:"empty-row",formCssClass:"dynamic-form",added:null,removed:null}})(django.jQuery);
